## Определение шаблона

Шаблон извлечения (Extract tpl) - это JSON файл который описывает как Teleport'у стрить транспортный пакет. Он состоит из трёх основных частей: `name`, атрибутов пакета `attributes`, и коллекции одного или больше `vehicles` - единиц транспортировки.

### Имя шаблона

Имя `name` Шаблона извлечения используется при генерации имени файла Извлечённого транспортного пакета. По этой причине, вам следует избежать использования `-` или других специальных символов в имени шаблона: `name`. Используйте `_` для разделения слов если Вам это необходимо.

### Аттрибуты пакета

*доступны в teleport'е >=1.2.0*

Часть `attributes` даёт возможность задать аттрибуты транспортного пакета который генерируется командой Extract. Например, это может быть использовано для установки аттрибутов пакета, которые будут использованы Менеджером пакетов при установке Дополнения, даёт вам возможность использовать Teleport как простой способ создавать устанавливаемые транспортные пакеты для использования в любом сайте MODX.

Заметим, однако, что при создании пакетов для использования в качестве дополнений MODX, вы должны избежать использования используемых Teleport'ом классов обозначения транспортных пакетов.
Избегайте в описании пакетов использования классов, которые xPDO использует сам (`xPDOObjectVehicle`, `xPDOFileVehicle`, `xPDOScriptVehicle`, или `xPDOTransportVehicle`).

Вот пример использования аттрибутов `attributes`  которые могли бы быть использованы для создания установочного пакета, типа Дополнение MODX. Этот теоритический тестовый `test` компонент расположен в директории MODX `core/components/` указывает зависимость от Компонента **collections** версии 3.x (для свойства MODX 2.4 зависимости пакетов) и включает содержимое файла changelog.txt, расположенного в директории компонента как атрибут `changelog`:

    "attributes": {
        "changelog": {
            "sourceType": "fileContent",
            "source": "{+properties.modx.core_path}components/test/changelog.txt"
        },
        "requires": {
            "collections": "~3.0"
        }
    },

Вы можете видеть в этом примере, отдельные аттрибуты могут получать брать содержимое из файлов доступных команде Extract путём задания значения аттрибута объекту с помощью свойств `sourceType` и `source` где `sourceType` значение указано `fileContent` и `source` - это полный путь к файлу из которого нужно получить содержимое. Другие типы `sourceType` могут начать поддерживаться в будущем.

### Describing the Vehicles

The `vehicles` property describes a collection of xPDO transport vehicles that will be included in the package in the order they are described. The vehicles can be core xPDOVehicle derivatives, Teleport-specific derivatives, or even custom derivatives.

A simple example from the `settings.tpl.json` included with Teleport describes two xPDOObject vehicles that will package all System and Context Settings from a MODX installation:

    "vehicles": [
        {
            "vehicle_class": "xPDOObjectVehicle",
            "object": {
                "class": "modSystemSetting",
                "criteria": [
                    "1 = 1"
                ],
                "package": "modx"
            },
            "attributes": {
                "preserve_keys": true,
                "update_object": true
            }
        },
        {
            "vehicle_class": "xPDOObjectVehicle",
            "object": {
                "class": "modContextSetting",
                "criteria": [
                    "1 = 1"
                ],
                "package": "modx"
            },
            "attributes": {
                "preserve_keys": true,
                "update_object": true
            }
        }
    ]

When [Inject](../use/inject.md)ed, the packaged object vehicles will preserve their payload's primary keys and update existing objects in the injection target that match by primary key, as described in the attributes provided for each vehicle in the collection.

Each vehicle consists of an optional `vehicle_package`, a `vehicle_class`, an `object` defining the vehicle payload, and optional `attributes` of the vehicle. The `vehicle_package` should be omitted when using the core xPDOVehicle implementations. The `object` will be unique to each `vehicle_class` implementation.

#### xPDOFileVehicle

* `source`: the absolute path to a file or directory to be packaged
* `target`: a PHP expression that will be `eval()`'d during installation to determine where the file/directory is unpacked

#### xPDOObjectVehicle

* `class`: defines the xPDOObject class to be packaged by the vehicle
* `criteria`: an array or object describing the criteria that will be used to select instances of the specified `class`
* `graph`: defines an object graph to use to package related xPDOObjects
* `graphCriteria`: defines the criteria for filtering related xPDOObjects selected by a `graph`
* `script`: an optional script to be used to create the vehicle or vehicles for this vehicle definition
* `package`: the xPDO package name for the specified `class`

#### xPDOScriptVehicle

* `source`: a script to be executed during installation of the vehicle

